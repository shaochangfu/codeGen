<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap
		PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
		"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="test">
	
	<typeAlias alias="test" type="org.webutils.test.TestBean"/>
	
	<resultMap id="result" class="org.webutils.test.TestBean">
			<result property="id" column="id" columnIndex="1"/>
			<result property="name" column="name" columnIndex="2"/>
			<result property="age" column="age" columnIndex="3"/>
			<result property="classes" column="classes" columnIndex="4"/>
			<result property="ext" column="ext" columnIndex="5"/>
			<result property="ext2" column="ext2" columnIndex="6"/>
	</resultMap>
	
	<!-- 插入  -->
	<insert id="insert" parameterClass="org.webutils.test.TestBean" >
		insert into test
		(
			id,
			name,
			age,
			classes,
			ext,
			ext2,
		) 
		values 
		(
			#id#,
			#name#,
			#age#,
			#classes#,
			#ext#,
			#ext2#,
		);
	</insert>
	
	<!-- 修改 -->
	<update id="update" parameterClass="test" > 
		update test set 
			id = #id# ,
			name = #name# ,
			age = #age# ,
			classes = #classes# ,
			ext = #ext# ,
			ext2 = #ext2# ,
		 where id = #id#;
	</update>
	
	<!-- 删除 -->
	
	<!-- 主键查询 -->
	<select id="findByPrimaryKey" parameterClass="java.lang.String" resultMap="result">
		select * from test p where p.id = #id# ;
	</select>
	
	<!-- 分页查询 -->
	<select id="findAllByPage" parameterClass="test" resultClass="test">
		select 
				p.id,
				p.name,
				p.age,
				p.classes,
				p.ext,
				p.ext2,
		 from test p where 1=1
			<isNotEmpty prepend="AND" property="p.id">
				and p.id = #id#
		 	</isNotEmpty>
			<isNotEmpty prepend="AND" property="p.name">
				and p.name = #name#
		 	</isNotEmpty>
			<isNotEmpty prepend="AND" property="p.age">
				and p.age = #age#
		 	</isNotEmpty>
			<isNotEmpty prepend="AND" property="p.classes">
				and p.classes = #classes#
		 	</isNotEmpty>
			<isNotEmpty prepend="AND" property="p.ext">
				and p.ext = #ext#
		 	</isNotEmpty>
			<isNotEmpty prepend="AND" property="p.ext2">
				and p.ext2 = #ext2#
		 	</isNotEmpty>
		 limit #start#,#detla# ;
	</select>
</sqlMap>